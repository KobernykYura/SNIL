@using SnilAcademicDepartment.BusinessLogic.DTOModels;
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    @Styles.Render("~/Content/projectscss")
    var base64 = Convert.ToBase64String(ViewBag.Project.Image);
    var imgSrc = String.Format("data:image/jpeg;base64,{0}", base64);
}
<div class="container">
    <ol class="breadcrumb">
        <li>
            @Html.ActionLink(Resources.Resource.Home, "Index", "Home")
        </li>
        <li>
            @Html.ActionLink(Resources.Resource.Projects, "Projects", "Projects")
        </li>
        <li class="active">@ViewBag.Project.ProjectStatus</li>
    </ol>
</div>
<div class="container">
    <h2>@ViewBag.Project.ProjectTitle</h2><br>
    <div class="row row1">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <img src="@imgSrc" alt="">
        </div>
        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
            @ViewBag.Project.Description
        </div>
    </div>
    <div class="row rowcurrent">
        @RenderProjectsV2(Resources.Resource.Projects, ViewBag.Previews)
    </div>
</div>

@helper RenderProjectsV2(string title, IEnumerable<ProjectPreview> collection)
{
    <div class="row">
        <h2>@title</h2>
        @{
            foreach (var item in collection)
            {
                var base64Block = Convert.ToBase64String(item.Image);
                var imgSrcProj = String.Format("data:image/jpeg;base64,{0}", base64Block);

                <div class="col-sm-6 col-md-4">
                    <div class="thumbnail block">
                        <img src="@imgSrcProj" alt="@item.Title" class="img-rounded">
                        <div class="caption">
                            <h3>@item.Title</h3>
                            <p>@item.Description</p>
                            @Html.RouteLink(Resources.Resource.LearnMore, new { controller = "Projects", action = "PageCurrent", id = item.ProjectId })
                        </div>
                    </div>
                </div>
            }
        }
    </div>
}
