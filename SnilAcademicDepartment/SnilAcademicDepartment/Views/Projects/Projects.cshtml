@using SnilAcademicDepartment.BusinessLogic.DTOModels;
@using SnilAcademicDepartment.Resources.ProjectsResources;
@{
    ViewBag.Title = Resources.Resource.Projects;
    @Styles.Render("~/Content/projectscss")
	var imgSrc = Url.Action("GetImage", new { controller = "Image", id = ViewBag.Preview.ImageId });
}
<div class="container">
    <ol class="breadcrumb">
        <li>
            @Html.ActionLink(Resources.Resource.Home, "Index", "Home")
        </li>
        <li class="active">@Resources.Resource.Projects</li>
    </ol>
</div>
<div class="container">
    <h2>@ProjectResource.Projects</h2><br>
    <div class="row row1">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <img src="@imgSrc" alt="" class="img-thumbnail">
        </div>
        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
            @ViewBag.Preview.Description
        </div>
    </div>
        @RenderProjectsV2(@ProjectResource.NewTitle, ViewBag.newPreviews as IEnumerable<ProjectPreview>, "PageNew")
        @RenderProjectsV2(@ProjectResource.FinishedTitle, ViewBag.finishedPreviews as IEnumerable<ProjectPreview>, "PageFinished")
        @RenderProjectsV2(@ProjectResource.CurrentTitle, ViewBag.currentPreviews as IEnumerable<ProjectPreview>, "PageCurrent")
</div>

@helper RenderProjectsV2(string title, IEnumerable<ProjectPreview> collection, string actionName)
{
    <div class="row">
        <h2>@title</h2>
        <div class="flex-container">
            @{
				foreach (var item in collection)
				{
					var imgSrcProj = Url.Action("GetImage", new { controller = "Image", id = item.ImageId });
                    <div class="col-sm-6 col-md-4">
                        <div class="thumbnail block">
                            <img src="@imgSrcProj" alt="@item.Title" class="img-rounded">
                            <div class="caption">
                                <h4>@item.Title</h4>
                                <p>@item.Description</p>
                                @Html.RouteLink(Resources.Resource.LearnMore, new { controller = "Projects", action = actionName, id = item.ProjectId })
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
}
