@using SnilAcademicDepartment.BusinessLogic.DTOModels;
@using SnilAcademicDepartment.Resources.ProjectsResources;
@{
    ViewBag.Title = "Projects";
    @Styles.Render("~/Content/projectscss")
    var base64 = Convert.ToBase64String(ViewBag.Preview.Image);
    var imgSrc = String.Format("data:image/jpeg;base64,{0}", base64);
}
<div class="container">
    <ol class="breadcrumb">
        <li>
            @Html.ActionLink(Resources.Resource.Home, "Index", "Home")
        </li>
        <li class="active">@Resources.Resource.Projects</li>
    </ol>
</div>
<div class="container">
    <h2>@ViewBag.Preview.Title</h2><br>
    <div class="row row1">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <img src="@imgSrc" alt="" class="img-thumbnail">
        </div>
        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
            @ViewBag.Preview.Description
        </div>
    </div>
        @RenderProjectsV2(@ProjectResource.NewTitle, ViewBag.newPreviews as IEnumerable<ProjectPreview>)
        @RenderProjectsV2(@ProjectResource.FinishedTitle, ViewBag.finishedPreviews as IEnumerable<ProjectPreview>)
        @RenderProjectsV2(@ProjectResource.CurrentTitle, ViewBag.currentPreviews as IEnumerable<ProjectPreview>)
</div>

@helper RenderProjects(string title, IEnumerable<ProjectPreview> collection)
{
    <div class="row row2">
        <h2>@title</h2>
        @{
            foreach (var item in collection)
            {
                var base64Block = Convert.ToBase64String(item.Image);
                var imgSrcProj = String.Format("data:image/jpeg;base64,{0}", base64Block);

                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 block">
                    <img src="@imgSrcProj" alt="" class="img-thumbnail">
                    <div class="projects">
                        <h4>@item.Title</h4>
                        <p>@item.Description</p>
                        @Html.RouteLink(Resources.Resource.LearnMore, new { controller = "Projects", action = "PageCurrent", id = item.ProjectId })
                    </div>
                </div>
            }
        }
    </div>
}

@helper RenderProjectsV2(string title, IEnumerable<ProjectPreview> collection)
{
    <div class="row">
        <h2>@title</h2>
        <div class="flex-container">
            @{
                foreach (var item in collection)
                {
                    var base64Block = Convert.ToBase64String(item.Image);
                    var imgSrcProj = String.Format("data:image/jpeg;base64,{0}", base64Block);

                    <div class="col-sm-6 col-md-4">
                        <div class="thumbnail block">
                            <img src="@imgSrcProj" alt="@item.Title" class="img-rounded">
                            <div class="caption">
                                <h3>@item.Title</h3>
                                <p>@item.Description</p>
                                @Html.RouteLink(Resources.Resource.LearnMore, new { controller = "Projects", action = "PageCurrent", id = item.ProjectId })
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
}
